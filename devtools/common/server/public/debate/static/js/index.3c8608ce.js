(()=>{"use strict";var e,t,r,a,s,n,o={5644(e,t,r){var a=r(8525),s=r(9081),n=r(8181),o=r(5148);let i="theme";function l(){try{let e=localStorage.getItem(i);if("light"===e||"dark"===e||"system"===e)return e}catch{}return"system"}function d(e){let t="dark"===e||"system"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",t)}let c=(0,s.createContext)(null);var u=r(9952),x=r(3019),m=r(5604),f=r(5144),h=r(5445),b=r(851),p=r(1137);function g(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,p.QP)((0,b.$)(t))}let v=(0,h.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function j(e){let{className:t,variant:r="default",size:s="default",asChild:n=!1,...o}=e,i=n?f.DX:"button";return(0,a.jsx)(i,{"data-slot":"button","data-variant":r,"data-size":s,className:g(v({variant:r,size:s,className:t})),...o})}var N=r(1252);function y(e){let{...t}=e;return(0,a.jsx)(N.bL,{"data-slot":"dropdown-menu",...t})}function w(e){let{...t}=e;return(0,a.jsx)(N.l9,{"data-slot":"dropdown-menu-trigger",...t})}function k(e){let{className:t,sideOffset:r=4,...s}=e;return(0,a.jsx)(N.ZL,{children:(0,a.jsx)(N.UC,{"data-slot":"dropdown-menu-content",sideOffset:r,className:g("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function E(e){let{className:t,inset:r,variant:s="default",...n}=e;return(0,a.jsx)(N.q7,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":s,className:g("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function I(){let{setTheme:e}=function(){let e=(0,s.useContext)(c);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}();return(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsxs)(j,{variant:"ghost",size:"icon",children:[(0,a.jsx)(x.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(m.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(k,{align:"end",children:[(0,a.jsx)(E,{onClick:()=>e("light"),children:"Light"}),(0,a.jsx)(E,{onClick:()=>e("dark"),children:"Dark"}),(0,a.jsx)(E,{onClick:()=>e("system"),children:"System"})]})]})}var T=r(8867);let A={apiBaseUrl:process.env.PUBLIC_API_URL||window.location.origin,wsBaseUrl:process.env.PUBLIC_WS_URL||`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}`},O=(0,T.Ay)({baseUrl:A.apiBaseUrl});async function _(e){let{data:t,error:r}=await O.GET("/debates",{params:{query:{offset:e}}});if(r||!t)throw Error("Failed to fetch debates");return t.data}async function R(e){let{data:t,error:r}=await O.DELETE("/debates/{id}",{params:{path:{id:e}}});if(r||!t)throw Error("Failed to delete debate");return t}let C=(0,h.F)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:r="default",asChild:s=!1,...n}=e,o=s?f.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge","data-variant":r,className:g(C({variant:r}),t),...n})}let P={AWAITING_OPPONENT:"bg-blue-500/20 text-blue-700 dark:text-blue-300",AWAITING_PROPOSER:"bg-orange-500/20 text-orange-700 dark:text-orange-300",AWAITING_ARBITRATOR:"bg-purple-500/20 text-purple-700 dark:text-purple-300",INTERVENTION_PENDING:"bg-red-500/20 text-red-700 dark:text-red-300",CLOSED:"bg-gray-500/20 text-gray-700 dark:text-gray-300"},z={AWAITING_OPPONENT:"Opponent",AWAITING_PROPOSER:"Proposer",AWAITING_ARBITRATOR:"Arbitrator",INTERVENTION_PENDING:"Intervention",CLOSED:"Closed"};function L(e){let{debate:t,isActive:r}=e;return(0,a.jsxs)(o.N_,{to:`/debates/${t.id}`,className:g("block rounded-lg p-3 transition-colors hover:bg-accent",r&&"bg-accent"),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h3",{className:"font-medium text-sm line-clamp-2",children:t.title}),(0,a.jsx)(S,{variant:"secondary",className:g("shrink-0 text-xs",P[t.state]),children:z[t.state]})]}),(0,a.jsx)("p",{className:"mt-1 text-xs text-muted-foreground",children:t.debate_type})]})}function D(e){let{className:t,type:r,...s}=e;return(0,a.jsx)("input",{type:r,"data-slot":"input",className:g("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}var M=r(8991);function W(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(M.bL,{"data-slot":"scroll-area",className:g("relative",t),...s,children:[(0,a.jsx)(M.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),(0,a.jsx)(G,{}),(0,a.jsx)(M.OK,{})]})}function G(e){let{className:t,orientation:r="vertical",...s}=e;return(0,a.jsx)(M.VM,{"data-slot":"scroll-area-scrollbar",orientation:r,className:g("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:(0,a.jsx)(M.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var U=r(4749),B=r(9683);function V(e){let{activeDebateId:t}=e,{debates:r,loading:n,error:o}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,[t,r]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[o,i]=(0,s.useState)(null),l=(0,s.useCallback)(async()=>{try{let e=await _();r(e.debates),i(null)}catch(e){i(e instanceof Error?e.message:"Failed to fetch debates")}finally{n(!1)}},[]);return(0,s.useEffect)(()=>{l();let t=setInterval(l,e);return()=>clearInterval(t)},[l,e]),{debates:t,loading:a,error:o,refresh:l}}(),[i,l]=(0,s.useState)(""),d=(0,s.useMemo)(()=>{if(!i.trim())return r;let e=i.toLowerCase();return r.filter(t=>t.title.toLowerCase().includes(e)||t.debate_type.toLowerCase().includes(e))},[r,i]);return(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsx)("div",{className:"p-3",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(U.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(D,{placeholder:"Search debates...",value:i,onChange:e=>l(e.target.value),className:"pl-8"})]})}),(0,a.jsx)(W,{className:"flex-1 px-3",children:n?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(B.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):o?(0,a.jsx)("div",{className:"py-8 text-center text-sm text-destructive",children:o}):0===d.length?(0,a.jsx)("div",{className:"py-8 text-center text-sm text-muted-foreground",children:i?"No debates found":"No debates yet"}):(0,a.jsx)("div",{className:"space-y-1 pb-3",children:d.map(e=>(0,a.jsx)(L,{debate:e,isActive:e.id===t},e.id))})})]})}var $=r(1401);function q(e){let{className:t,orientation:r="horizontal",decorative:s=!0,...n}=e;return(0,a.jsx)($.b,{"data-slot":"separator",decorative:s,orientation:r,className:g("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}function F(){let e=(0,o.g)(),t=null==e?void 0:e.id;return(0,a.jsxs)("aside",{className:"flex h-full w-60 flex-col border-r bg-sidebar",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Debate"})]}),(0,a.jsx)(I,{})]}),(0,a.jsx)(q,{}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(V,{activeDebateId:t})})]})}var Z=r(7696),H=r(6500),J=r(7348);function K(e,t){switch(t.type){case"CONNECTED":return{...e,connected:!0,error:null};case"DISCONNECTED":return{...e,connected:!1};case"ERROR":return{...e,error:t.error};case"INITIAL_STATE":return{...e,debate:t.debate,arguments:t.arguments};case"NEW_ARGUMENT":return{...e,debate:t.debate,arguments:[...e.arguments,t.argument]};default:return e}}let X={debate:null,arguments:[],connected:!1,error:null};var Q=r(7072),Y=r(6799);function ee(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:g("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function et(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:g("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function er(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:g("px-6",t),...r})}let ea={proposer:"bg-blue-50/50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800",opponent:"bg-orange-50/50 dark:bg-orange-950/20 border-orange-200 dark:border-orange-800",arbitrator:"bg-purple-50/50 dark:bg-purple-950/20 border-purple-200 dark:border-purple-800"},es={proposer:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20",opponent:"bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-500/20",arbitrator:"bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/20"},en={proposer:"Proposer",opponent:"Opponent",arbitrator:"Arbitrator"},eo={MOTION:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-300",CLAIM:"bg-sky-500/20 text-sky-700 dark:text-sky-300",APPEAL:"bg-amber-500/20 text-amber-700 dark:text-amber-300",RULING:"bg-purple-500/20 text-purple-700 dark:text-purple-300",INTERVENTION:"bg-red-500/20 text-red-700 dark:text-red-300",RESOLUTION:"bg-green-500/20 text-green-700 dark:text-green-300"};function ei(e){let{argument:t}=e,r=function(e){let t=new Date(e.includes("T")||e.includes("Z")?e:e.replace(" ","T")+"Z"),r=Math.floor((new Date().getTime()-t.getTime())/6e4),a=t.toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),s="";if(r<1)s="just now";else if(r<60)s=`${r}m ago`;else{let e=Math.floor(r/60);if(e<24)s=`${e}h ago`;else{let r=Math.floor(e/24);s=r<7?`${r}d ago`:t.toLocaleDateString()}}return{relative:s,absolute:a}}(t.created_at);return(0,a.jsxs)(ee,{className:g("transition-colors border",ea[t.role]),children:[(0,a.jsx)(et,{className:"pb-2 pt-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{variant:"outline",className:g("text-xs",es[t.role]),children:en[t.role]}),(0,a.jsx)(S,{variant:"secondary",className:g("text-xs",eo[t.type]),children:t.type})]}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground cursor-help",title:r.absolute,children:[r.relative," (",r.absolute,")"]})]})}),(0,a.jsx)(er,{className:"px-4 pb-4",children:(0,a.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-headings:mt-4 prose-headings:mb-2 prose-p:my-2 prose-ul:my-2 prose-ol:my-2 prose-li:my-0 prose-pre:bg-muted prose-pre:text-foreground prose-code:text-foreground prose-code:bg-muted prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none",children:(0,a.jsx)(Q.oz,{remarkPlugins:[Y.A],children:t.content})})})]})}var el=r(5977);function ed(e){let{arguments:t}=e,r=(0,s.useRef)(null);return((0,s.useEffect)(()=>{var e;null==(e=r.current)||e.scrollIntoView({behavior:"smooth"})},[t.length]),0===t.length)?(0,a.jsx)("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:"No arguments yet"}):(0,a.jsx)(W,{className:"h-full",children:(0,a.jsxs)("div",{className:"space-y-4 p-4",children:[t.map((e,r)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(ei,{argument:e}),r<t.length-1&&(0,a.jsx)("div",{className:"flex justify-center my-2",children:(0,a.jsx)(el.A,{className:"w-4 h-4 text-muted-foreground/30"})})]},e.id)),(0,a.jsx)("div",{ref:r})]})})}var ec=r(8783),eu=r(3726);function ex(e){let{className:t,...r}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:g("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}function em(e){let{state:t,onIntervention:r,onRuling:n}=e,[o,i]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(0),[x,m]=(0,s.useState)(!1),f=(0,s.useRef)(null),h=(0,s.useRef)(0),b=(0,s.useCallback)(()=>{m(!1),u(0),f.current&&(clearTimeout(f.current),f.current=null)},[]),p=(0,s.useCallback)(()=>{m(!0),h.current=Date.now();let e=()=>{let t=Math.min((Date.now()-h.current)/1e3*100,100);u(t),t>=100?(r(),b()):f.current=setTimeout(e,16)};f.current=setTimeout(e,16)},[r,b]);return"CLOSED"===t?(0,a.jsx)(ee,{className:"p-4",children:(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"This debate has been closed."})}):"AWAITING_ARBITRATOR"===t||"INTERVENTION_PENDING"===t?(0,a.jsx)(ee,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"AWAITING_ARBITRATOR"===t?"Submit Ruling":"Submit Ruling (after Intervention)"}),(0,a.jsx)(ex,{placeholder:"Enter your ruling...",value:o,onChange:e=>i(e.target.value),rows:3,className:"resize-none"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:e=>d(e.target.checked),className:"rounded"}),"Close debate"]}),(0,a.jsxs)(j,{onClick:()=>{o.trim()&&(n(o.trim(),l),i(""),d(!1))},disabled:!o.trim(),size:"sm",children:[(0,a.jsx)(ec.A,{className:"mr-2 h-4 w-4"}),"Submit Ruling"]})]})]})}):(0,a.jsxs)(ee,{className:"p-4",children:[(0,a.jsxs)(j,{variant:"destructive",className:"relative w-full overflow-hidden",onMouseDown:p,onMouseUp:b,onMouseLeave:b,onTouchStart:p,onTouchEnd:b,children:[x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-red-800/50 transition-all",style:{width:`${c}%`}}),(0,a.jsxs)("span",{className:"relative flex items-center justify-center gap-2",children:[x?(0,a.jsx)(B.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(eu.A,{className:"h-4 w-4"}),x?"Hold to confirm...":"Hold to Intervene"]})]}),(0,a.jsx)("p",{className:"mt-2 text-center text-xs text-muted-foreground",children:"Hold button for 1 second to pause the debate"})]})}let ef={AWAITING_OPPONENT:"Waiting for Opponent",AWAITING_PROPOSER:"Waiting for Proposer",AWAITING_ARBITRATOR:"Waiting for Arbitrator",INTERVENTION_PENDING:"Intervention Pending",CLOSED:"Closed"};r(8115),r(246),r(909),r(6936),r(5705);let eh=document.getElementById("root");if(!eh)throw Error("Root element not found");(0,n.createRoot)(eh).render((0,a.jsx)(s.StrictMode,{children:(0,a.jsx)(function(e){let{children:t}=e,r=function(){let[e,t]=(0,s.useState)(l),r=(0,s.useCallback)(e=>{t(e);try{localStorage.setItem(i,e)}catch{}d(e)},[]);return(0,s.useEffect)(()=>{d(e)},[e]),(0,s.useEffect)(()=>{if("system"!==e)return;let t=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>d("system");return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[e]),{theme:e,setTheme:r}}();return(0,a.jsx)(c.Provider,{value:r,children:t})},{children:(0,a.jsx)(o.Kd,{basename:"/debate",children:(0,a.jsx)(o.BV,{children:(0,a.jsxs)(o.qh,{element:(0,a.jsx)(function(){return(0,a.jsx)("div",{className:"font-sans antialiased",children:(0,a.jsx)(o.sv,{})})},{}),children:[(0,a.jsx)(o.qh,{index:!0,element:(0,a.jsx)(o.C5,{to:"/debates",replace:!0})}),(0,a.jsxs)(o.qh,{path:"debates",element:(0,a.jsx)(function(){return(0,a.jsxs)("div",{className:"flex h-screen",children:[(0,a.jsx)(F,{}),(0,a.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(o.sv,{})})]})},{}),children:[(0,a.jsx)(o.qh,{index:!0,element:(0,a.jsx)(function(){return(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-muted-foreground",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg",children:"Select a debate to view"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"or wait for a new one to appear"})]})},{})}),(0,a.jsx)(o.qh,{path:":id",element:(0,a.jsx)(function(){let{id:e}=(0,o.g)(),t=(0,o.Zp)(),[r,n]=(0,s.useState)(!1),{debate:i,arguments:l,connected:d,error:c,submitIntervention:u,submitRuling:x}=function(e){let[t,r]=(0,s.useReducer)(K,X),a=(0,s.useRef)(null),n=(0,s.useRef)(null),o=(0,s.useRef)(0),i=(0,s.useRef)(null),l=(0,s.useCallback)(()=>{var t;if((null==(t=a.current)?void 0:t.readyState)===WebSocket.OPEN)return;let s=new WebSocket(`${A.wsBaseUrl}/ws?debate_id=${e}`);s.onopen=()=>{o.current=0,r({type:"CONNECTED"})},s.onmessage=e=>{try{let t=JSON.parse(e.data);"initial_state"===t.event?r({type:"INITIAL_STATE",debate:t.data.debate,arguments:t.data.arguments}):"new_argument"===t.event&&r({type:"NEW_ARGUMENT",debate:t.data.debate,argument:t.data.argument})}catch{}},s.onclose=()=>{r({type:"DISCONNECTED"});let e=Math.min(1e3*Math.pow(2,o.current),3e4);o.current++,n.current=setTimeout(()=>{var e;return null==(e=i.current)?void 0:e.call(i)},e)},s.onerror=()=>{r({type:"ERROR",error:"WebSocket connection failed"})},a.current=s},[e]);(0,s.useEffect)(()=>{i.current=l},[l]);let d=(0,s.useCallback)(()=>{n.current&&(clearTimeout(n.current),n.current=null),a.current&&(a.current.close(),a.current=null)},[]),c=(0,s.useCallback)(e=>{var t;(null==(t=a.current)?void 0:t.readyState)===WebSocket.OPEN&&a.current.send(JSON.stringify(e))},[]),u=(0,s.useCallback)(t=>{c({event:"submit_intervention",data:{debate_id:e,content:t}})},[e,c]),x=(0,s.useCallback)((t,r)=>{c({event:"submit_ruling",data:{debate_id:e,content:t,close:r}})},[e,c]);return(0,s.useEffect)(()=>(l(),d),[l,d]),{...t,submitIntervention:u,submitRuling:x,reconnect:l}}(e),m=(0,s.useCallback)(async()=>{if(confirm("Are you sure you want to delete this debate? This action cannot be undone.")){n(!0);try{await R(e),t("/debates")}catch(e){alert(e instanceof Error?e.message:"Failed to delete debate")}finally{n(!1)}}},[e,t]);return c&&!i?(0,a.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-destructive",children:[(0,a.jsx)(Z.A,{className:"h-12 w-12 mb-4"}),(0,a.jsx)("p",{className:"text-lg",children:"Connection Error"}),(0,a.jsx)("p",{className:"text-sm mt-1 text-muted-foreground",children:c})]}):i?(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex h-14 items-center justify-between border-b px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("h1",{className:"font-semibold truncate",children:i.title}),(0,a.jsx)(S,{variant:"secondary",className:"shrink-0",children:ef[i.state]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{variant:"ghost",size:"icon",onClick:m,disabled:r,className:"text-muted-foreground hover:text-destructive",title:"Delete debate",children:r?(0,a.jsx)(B.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(H.A,{className:"h-4 w-4"})}),(0,a.jsx)(q,{orientation:"vertical",className:"h-6"}),(0,a.jsx)("div",{className:g("h-2 w-2 rounded-full",d?"bg-green-500":"bg-red-500"),title:d?"Connected":"Disconnected"}),d?(0,a.jsx)(J.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(Z.A,{className:"h-4 w-4 text-red-500"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)(ed,{arguments:l})}),(0,a.jsx)(q,{}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(em,{state:i.state,onIntervention:u,onRuling:x})})]}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsx)(B.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})},{})})]})]})})})})}))}},i={};function l(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return o[e].call(r.exports,r,r.exports,l),r.exports}l.m=o,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(r,a){if(1&a&&(r=this(r)),8&a||"object"==typeof r&&r&&(4&a&&r.__esModule||16&a&&"function"==typeof r.then))return r;var s=Object.create(null);l.r(s);var n={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>{n[e]=()=>r[e]});return n.default=()=>r,l.d(s,n),s},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nc=void 0,r=[],l.O=(e,t,a,s)=>{if(t){s=s||0;for(var n=r.length;n>0&&r[n-1][2]>s;n--)r[n]=r[n-1];r[n]=[t,a,s];return}for(var o=1/0,n=0;n<r.length;n++){for(var[t,a,s]=r[n],i=!0,d=0;d<t.length;d++)(!1&s||o>=s)&&Object.keys(l.O).every(e=>l.O[e](t[d]))?t.splice(d--,1):(i=!1,s<o&&(o=s));if(i){r.splice(n--,1);var c=a();void 0!==c&&(e=c)}}return e},a={410:0},l.O.j=e=>0===a[e],s=(e,t)=>{var r,s,[n,o,i]=t,d=0;if(n.some(e=>0!==a[e])){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);if(i)var c=i(l)}for(e&&e(t);d<n.length;d++)s=n[d],l.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return l.O(c)},(n=self.webpackChunk_aweave_debate_web=self.webpackChunk_aweave_debate_web||[]).forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n));var d=l.O(void 0,["783","535","364"],()=>l(5644));d=l.O(d)})();